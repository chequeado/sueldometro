"use strict";angular.module("sueldometroApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngTable"]).config(function(){}).directive("integer",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){return parseInt(a,10)})}}}).service("TabletopService",["$q",function(a){this.data=!1,this.getData=function(){var b=this;return a(function(a,c){b.data?a(angular.copy(b.data)):Tabletop.init({key:"1XDxFbkRB3uoLvig7n-Iq7YXE9AvuY4UR8d4VGigCHds",callback:function(c,d){b.data=c,a(angular.copy(b.data))},simpleSheet:!0,parseNumbers:!0})})}}]),angular.module("sueldometroApp").controller("MainCtrl",["$scope","$filter","TabletopService","ngTableParams","$timeout",function(a,b,c,d,e){a.pymChild=new pym.Child,c.getData().then(function(c){a.data=c,a.tableParams=new d({page:1,count:a.data.length,sorting:{titulo:"asc"}},{total:a.data.length,counts:[],getData:function(c,d){var e=d.sorting()?b("orderBy")(a.data,d.orderBy()):a.data;c.resolve(e)}}),e(function(){a.pymChild.sendHeight()},500)})}]),angular.module("sueldometroApp").directive("numbersOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0==a||""==a)return"";a=""+a;var b=a.replace(/[^0-9]/g,"");return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}).filter("escape",function(){return window.encodeURIComponent}).controller("InteractivoCtrl",["$scope","$filter","TabletopService","ngTableParams","$timeout","$location",function(a,b,c,d,e,f){a.pymChild=new pym.Child({polling:500}),a.loading=!0,a.autocomplete={},c.getData().then(function(c){var e=c;a.variation=!1,a.myData={titulo:"MI SALARIO",ano_2006:null,ano_2007:null,ano_2008:null,ano_2009:null,ano_2010:null,ano_2011:null,ano_2012:null,ano_2013:null,ano_2014:null,ano_2015:null,ano_2016:null,graficar:"si",indice:0,indice_anual:0,userData:!0,icon:"glyphicon glyphicon-user"},a.loading=!1,a.renderMensaje=function(){var b="",c=parseInt(a.myData.indice);c>900?b="¡Qué bien!":900>c?b="¡Ouch!":900==c&&(b="¡Qué coincidencia!"),a.mensaje=b},a.conclusion=function(){return"Mi sueldo varió un "+parseInt(a.myData.indice)+"% en la última década, mientras que el del gremio de camioneros lo hizo en 900%"},a.conclusionShare=function(){return b("escape")(a.conclusion()+" vía @chequeado - http://chequeado.com")},e.push(a.myData),a.rawData=e,a.tableParams=new d({page:1,count:e.length,sorting:{titulo:"asc"}},{total:e.length,counts:[],getData:function(a,c){var d=c.sorting()?b("orderBy")(e,c.orderBy()):e;a.resolve(d.filter(function(a){return"si"==a.graficar}))}});var f={x:["2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016"]},g={"Mi SALARIO":"spline"},h={"Mi SALARIO":"#000"};angular.forEach(e,function(b,c){b.ano_2011&&"si"==b.graficar?(f[b.titulo]=[parseInt(b.ano_2006),parseInt(b.ano_2007),parseInt(b.ano_2008),parseInt(b.ano_2009),parseInt(b.ano_2010),parseInt(b.ano_2011),parseInt(b.ano_2012),parseInt(b.ano_2013),parseInt(b.ano_2014),parseInt(b.ano_2015),parseInt(b.ano_2016)],g[b.titulo]="spline",h[b.titulo]=a.colors[c]):a.autocomplete[b.titulo]=b}),a.chart=c3.generate({bindto:"#chart-container",data:{x:"x",json:f,types:g},size:{height:500},axis:{x:{padding:{left:.2,right:.2}}},line:{connectNull:!1},tooltip:{grouped:!1,format:{value:function(a,b,c){var d=d3.format("$");return d(a)}}}}),a.chart_index=c3.generate({bindto:"#chart-container-indice",data:{json:a.rawData.filter(function(a){return"si"==a.graficar}),type:"bar",keys:{x:"titulo",value:["indice_anual","indice"]},labels:!0},legend:{position:"right"},size:{height:500},axis:{x:{type:"category",padding:{left:.2,right:.2}}},line:{connectNull:!1},padding:{bottom:30},tooltip:{format:{value:function(a,b,c){return a+"%"}}}}),a.labels=["2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016"]}),a.valueChanged=function(){a.tableParams.reload(),a.changeVariation(),a.refreshChart()},a.refreshChart=function(){a.chart.load({columns:[["Mi SALARIO",a.myData.ano_2006&&""!=a.myData.ano_2006?parseInt(a.myData.ano_2006):null,a.myData.ano_2007&&""!=a.myData.ano_2007?parseInt(a.myData.ano_2007):null,a.myData.ano_2008&&""!=a.myData.ano_2008?parseInt(a.myData.ano_2008):null,a.myData.ano_2009&&""!=a.myData.ano_2009?parseInt(a.myData.ano_2009):null,a.myData.ano_2010&&""!=a.myData.ano_2010?parseInt(a.myData.ano_2010):null,a.myData.ano_2011&&""!=a.myData.ano_2011?parseInt(a.myData.ano_2011):null,a.myData.ano_2012&&""!=a.myData.ano_2012?parseInt(a.myData.ano_2012):null,a.myData.ano_2013&&""!=a.myData.ano_2013?parseInt(a.myData.ano_2013):null,a.myData.ano_2014&&""!=a.myData.ano_2014?parseInt(a.myData.ano_2014):null,a.myData.ano_2015&&""!=a.myData.ano_2015?parseInt(a.myData.ano_2015):null,a.myData.ano_2015&&""!=a.myData.ano_2016?parseInt(a.myData.ano_2016):null]]}),a.chart_index.load({json:a.rawData.filter(function(a){return"si"==a.graficar}),type:"bar",keys:{x:"titulo",value:["indice_anual","indice"]},labels:!0})},a.changeVariation=function(){a.myData.ano_2006&&a.myData.ano_2016&&""!=a.myData.ano_2006&&""!=a.myData.ano_2016?(a.variation=!0,a.myData.indice=Math.round(100*a.myData.ano_2016/a.myData.ano_2006-100),a.myData.indice_anual=a.myData.indice/10,a.renderMensaje()):a.variation=!1},a.setSalario=function(b,c){a.myData["ano_"+b]=a.autocomplete[c]["ano_"+b],a.valueChanged()},a.setSalarioNull=function(b){a.myData["ano_"+b]=null,a.valueChanged()},a.setFocus=function(a){angular.element("#textinput-"+a).focus()},a.completeMode=!0,a.anios=d3.range(2006,2017),a.autocompleteAll=function(b){a.completeMode=b,b?angular.forEach(a.anios,function(c){a.setSalario(c,b)}):angular.forEach(a.anios,function(b){a.setSalarioNull(b)})},a.changeTab=function(a){angular.element(".btn-tab").removeClass("active"),angular.element(a.currentTarget).addClass("active")},a.colors=["#EF4F2F","#ffc468","#988b7b","#25bdbe","#c2beab","#9f0026","#88d9f6","#86c6b5","#fa9d3e"]}]),angular.module("sueldometroApp").run(["$templateCache",function(a){a.put("views/interactivo.html",'<div ng-controller="InteractivoCtrl"><div class="row"><div class="col-sm-12"><form class="form-inline"><fieldset><!-- Form Name --><legend></legend><div class="row"><div class="col-sm-12">Completá los datos de tu salario mensual aproximado EN BRUTO para los siguientes años:</div><div class="col-sm-12"><a class="btn btn-default" ng-click="autocompleteAll(\'minimo\')">Trabajador sueldo mínimo</a> <a class="btn btn-default" ng-click="autocompleteAll(\'promedio\')">Trabajador sueldo promedio</a> <a class="btn btn-default" ng-click="autocompleteAll(\'maximo\')">Trabajador sueldo máximo</a> <a class="btn btn-default" ng-click="autocompleteAll(false)">Completar mi sueldo</a></div><div ng-show="!completeMode" ng-repeat="a in labels"><div class="col-sm-3"><hr><div class="form-group"><div class="btn-group"><button type="button" class="btn btn-link btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Año {{a}} <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span></button><ul class="dropdown-menu"><li><a ng-click="setFocus(a)">¡Lo recuerdo!</a></li><li role="separator" class="divider"></li><li><a ng-click="setSalario(a,\'minimo\')">Salario mínimo</a></li><li><a ng-click="setSalario(a,\'promedio\')">Salario promedio</a></li><li><a ng-click="setSalario(a,\'maximo\')">Salario máximo</a></li></ul></div><div class="input-group input-group-chq"><span class="input-group-addon" id="basic-addon-{{a}}">$</span> <input id="textinput-{{a}}" name="textinput-{{a}}" placeholder="" class="form-control input-md" type="text" step="1000" numbers-only="numbers-only" required="required" ng-change="valueChanged()" min="0" maxlength="5" ng-model="myData[\'ano_\'+a]"></div></div></div></div></div></fieldset></form></div></div><hr><div class="row"><div class="col-sm-12"><div><div class="btn-group btn-group-justified" role="group" aria-label="..."><div class="btn-group" role="group"><a href="#chart" aria-controls="chart" role="tab" ng-click="changeTab($event)" data-toggle="tab" class="btn btn-default btn-tab active">Gráfico</a></div><div class="btn-group" role="group"><a href="#table" aria-controls="table" role="tab" ng-click="changeTab($event)" data-toggle="tab" class="btn btn-default btn-tab">Tabla</a></div><div class="btn-group" role="group"><a href="#chart-indice" aria-controls="chart" role="tab" ng-click="changeTab($event)" data-toggle="tab" class="btn btn-default btn-tab">Gráfico Índice</a></div><div class="btn-group" role="group"><a href="#table-indice" aria-controls="table" role="tab" ng-click="changeTab($event)" data-toggle="tab" class="btn btn-default btn-tab">Tabla Índice</a></div></div><!-- Tab panes --><div class="tab-content"><div role="tabpanel" class="tab-pane active" id="chart"><div id="chart-container"></div></div><div role="tabpanel" class="tab-pane" id="chart-indice"><div id="chart-container-indice"></div></div><div role="tabpanel" class="tab-pane" id="table"><table class="table table-striped" ng-table="tableParams" class="table"><tr ng-repeat="d in $data" ng-class="{\'user-data\':d.userData}"><td data-title="\'Título\'" data-sortable="\'titulo\'"><span class="{{d.icon}}"></span> {{d.titulo}}</td><td class="text-right" data-title="\'2006\'" data-sortable="\'ano_2006\'"><span ng-show="d.ano_2006">${{d.ano_2006}}</span></td><td class="text-right" data-title="\'2007\'" data-sortable="\'ano_2007\'"><span ng-show="d.ano_2007">${{d.ano_2007}}</span></td><td class="text-right" data-title="\'2008\'" data-sortable="\'ano_2008\'"><span ng-show="d.ano_2008">${{d.ano_2008}}</span></td><td class="text-right" data-title="\'2009\'" data-sortable="\'ano_2009\'"><span ng-show="d.ano_2009">${{d.ano_2009}}</span></td><td class="text-right" data-title="\'2010\'" data-sortable="\'ano_2010\'"><span ng-show="d.ano_2010">${{d.ano_2010}}</span></td><td class="text-right" data-title="\'2011\'" data-sortable="\'ano_2011\'"><span ng-show="d.ano_2011">${{d.ano_2011}}</span></td><td class="text-right" data-title="\'2012\'" data-sortable="\'ano_2012\'"><span ng-show="d.ano_2012">${{d.ano_2012}}</span></td><td class="text-right" data-title="\'2013\'" data-sortable="\'ano_2013\'"><span ng-show="d.ano_2013">${{d.ano_2013}}</span></td><td class="text-right" data-title="\'2014\'" data-sortable="\'ano_2014\'"><span ng-show="d.ano_2014">${{d.ano_2014}}</span></td><td class="text-right" data-title="\'2015\'" data-sortable="\'ano_2015\'"><span ng-show="d.ano_2015">${{d.ano_2015}}</span></td><td class="text-right" data-title="\'2016\'" data-sortable="\'ano_2016\'"><span ng-show="d.ano_2016">${{d.ano_2016}}</span></td></tr></table></div><div role="tabpanel" class="tab-pane" id="table-indice"><table class="table table-striped" ng-table="tableParams" class="table"><tr ng-repeat="d in $data" ng-class="{\'user-data\':d.userData}"><td data-title="\'Título\'" data-sortable="\'titulo\'"><span class="{{d.icon}}"></span> {{d.titulo}}</td><td class="text-right" data-title="\'Índice de aumento\'" data-sortable="\'indice\'"><span ng-show="d.indice">{{d.indice}}%</span></td><td class="text-right" data-title="\'Índice de aumento anual\'" data-sortable="\'indice_anual\'"><span ng-show="d.indice_anual">{{d.indice_anual}}%</span></td></tr></table></div></div></div><div class="well well-lg"><div ng-show="variation"><h1 class="text-center">{{mensaje}}</h1><h2 class="text-center">{{conclusion()}}</h2><p class="text-center"><a class="btn btn-default btn-lg" ng-href="https://twitter.com/intent/tweet?text={{conclusionShare()}}" target="_blank">Twitter</a> <a class="btn btn-default btn-lg" ng-href="https://www.facebook.com/sharer/sharer.php?u=http://chequeado.com" target="_blank">Facebook</a></p></div><div ng-hide="variation"></div></div></div></div></div>'),a.put("views/main.html",'<div ng-controller="MainCtrl"><div class="row"><div class="col-sm-12"><table class="table table-striped" ng-table="tableParams" class="table"><tr ng-repeat="d in $data" ng-class="{\'user-data\':(d.id==9)}"><td data-title="\'Título\'" data-sortable="\'titulo\'"><span class="{{d.icon}}"></span> {{d.titulo}}</td><td class="text-right" data-title="\'2011\'" data-sortable="\'ano_2011\'">${{d.ano_2011}}</td><td class="text-right" data-title="\'2012\'" data-sortable="\'ano_2012\'">${{d.ano_2012}}</td><td class="text-right" data-title="\'2013\'" data-sortable="\'ano_2013\'">${{d.ano_2013}}</td><td class="text-right" data-title="\'2014\'" data-sortable="\'ano_2014\'">${{d.ano_2014}}</td><td class="text-right" data-title="\'2015\'" data-sortable="\'ano_2015\'">${{d.ano_2015}}</td><td class="text-right" data-title="\'Índice de crecimiento\'" data-sortable="\'indice\'">{{d.indice}}%</td><td class="text-right" data-title="\'Índice de crecimiento anual\'" data-sortable="\'indice_anual\'">{{d.indice_anual}}%</td></tr></table></div></div></div>')}]);